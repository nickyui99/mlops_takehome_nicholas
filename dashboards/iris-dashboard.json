{
  "dashboard": {
    "title": "Iris Prediction Service",
    "panels": [
      {
        "title": "RPS",
        "type": "graph",
        "targets": [{
          "expr": "rate(http_requests_total[1m])",
          "legendFormat": "{{endpoint}} {{status}}"
        }]
      },
      {
        "title": "p95 Latency (seconds)",
        "type": "graph",
        "targets": [{
          "expr": "histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[1m]))",
          "legendFormat": "{{endpoint}}"
        }]
      },
      {
        "title": "Error Rate (%)",
        "type": "graph",
        "targets": [{
          "expr": "100 * rate(http_requests_total{status=~\"5..\"}[1m]) / rate(http_requests_total[1m])",
          "legendFormat": "5xx rate"
        }]
      },
      {
        "title": "CPU Usage",
        "type": "graph",
        "targets": [{
          "expr": "rate(container_cpu_usage_seconds_total{namespace=\"mlops-dev\", pod=~\"iris-predictor.*\"}[1m])"
        }]
      },
      {
        "title": "Memory Usage",
        "type": "graph",
        "targets": [{
          "expr": "container_memory_working_set_bytes{namespace=\"mlops-dev\", pod=~\"iris-predictor.*\"}"
        }]
      }
    ],
    "refresh": "10s"
  },
  "overwrite": true
}